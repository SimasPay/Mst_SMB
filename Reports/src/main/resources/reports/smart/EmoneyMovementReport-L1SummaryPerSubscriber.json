{
    "ReportName" : "EmoneyMovementReport-L1SummaryPerSubscriber",
    
    "ReportHeaderText" : "Emoney Movement Report - L1 Summary Per Subscriber",
                            
    "ReportHeader" : [   
                           [ "Date Range From" , "${StartTime}", "To" , "${EndTime}" ],
   						   [ "Subscriber Status", "${SubscriberStatus}"],
                           [ "Restrictions", "${SubscriberRestrictions}"]
                     ],
    
    "ReportHeaderDataColumnsWidth" : [ 2,3,1,6 ],
         
    "HeaderColumns" : [ "Serial No",
    					"MDN",
    					"Pocket Reference No", 
    					"Subscriber Status",
    					"Restriction Status", 
    					"Beginning Balance", 
    					"Addition", 
    					"Deduction",
    					"Ending Balance"
    					],
    
    "HeaderColumnsWidth" : [2,3,3,3,3,3,3,3,3],

    "EncryptedColumnIndices" : [3],
        
    "Query" : " SELECT
					@n:=@n+1,
          			sm.MDN,
         			p.CardPAN,
					CASE
						WHEN s.status=0 THEN 'Initialized'
						WHEN s.status=1 THEN 'Active'
						WHEN s.status=2 THEN 'PendingRetirement'
						WHEN s.status=3 THEN 'Retired'
						WHEN s.status=4 THEN 'Registered'
						WHEN s.status=5 THEN 'Suspend'
						WHEN s.status=6 THEN 'InActive'
						ELSE 'Non-Registered'
					END,
					CASE
						WHEN s.Restrictions=0 THEN 'None'
						WHEN s.Restrictions=1 THEN 'SelfSuspended'
						WHEN s.Restrictions=2 THEN 'Suspended'
						WHEN s.Restrictions=4 THEN 'SecurityLocked'
						WHEN s.Restrictions=8 THEN 'AbsoluteLocked'
					END,
					round(b.openingBalance,2),
					round(b.TotalCredit,2),
					round(b.TotalDebit,2),
					round(b.ClosingBalance,2)
				FROM
				   subscriber s
				   INNER JOIN subscriber_mdn sm ON sm.subscriberID = s.ID
				   INNER JOIN pocket p on p.MDNID = sm.ID
				   INNER JOIN booking_dated_balance b on b.PocketID = p.ID,
				   (select @n:=0) as initvar
				WHERE
					s.CreateTime < ${EndTime}
			     	AND s.CreateTime >= ${StartTime}
			     	AND s.status like  ${SubscriberStatus}
					AND s.Restrictions like ${SubscriberRestrictions}
				ORDER BY
           			@n asc",
    
    "ReportFooter" : [ 
                           [ "Report Generation Date" , "${ReportGenerationDate}", "Generated By" , "${UserName}" ]
                          ],
    
    "ReportFooterDataColumnsWidth" : [ 5,3,2,6 ],
        
    "PageSize" : "A3",

    "PageOrientation" : "portrait"
    
}