

UPDATE POCKET_TEMPLATE SET DESCRIPTION = 'Emoney-FullyBanked' WHERE DESCRIPTION = 'LakuPandai-Agent';

INSERT INTO POCKET_TEMPLATE (VERSION,LASTUPDATETIME,UPDATEDBY,CREATETIME,CREATEDBY,MSPID,TYPE,BANKACCOUNTCARDTYPE,DESCRIPTION,COMMODITY,CARDPANSUFFIXLENGTH,UNITS,ALLOWANCE,MAXIMUMSTOREDVALUE,MINIMUMSTOREDVALUE,MAXAMOUNTPERTRANSACTION,MINAMOUNTPERTRANSACTION,MAXAMOUNTPERDAY,MAXAMOUNTPERWEEK,MAXAMOUNTPERMONTH,MAXTRANSACTIONSPERDAY,MAXTRANSACTIONSPERWEEK,MAXTRANSACTIONSPERMONTH,MINTIMEBETWEENTRANSACTIONS,BANKCODE,OPERATORCODE,BILLINGTYPE,WEBTIMEINTERVAL,WEBSERVICETIMEINTERVAL,UTKTIMEINTERVAL,BANKCHANNELTIMEINTERVAL,DENOMINATION,MAXUNITS,POCKETCODE,TYPEOFCHECK,REGULAREXPRESSION,ISCOLLECTORPOCKET,NUMBEROFPOCKETSALLOWEDFORMDN) VALUES 
(1,SYSDATE,'system',SYSDATE,'system',1,6,1,'LakuPandai-Agent',4,6,NULL,0,'1000000.0000','0.0000','1000000.0000','0.0000','1000000.0000','100000000.0000','1000000000.0000',1000,100000,10000000,0,9999,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'8',0,'',0,1);

INSERT INTO POCKET_TEMPLATE_CONFIG (VERSION,LASTUPDATETIME,UPDATEDBY,CREATETIME,CREATEDBY,SUBSCRIBERTYPE,BUSINESSPARTNERTYPE,KYCLEVEL,COMMODITY,POCKETTYPE,ISSUSPENCEPOCKET,ISCOLLECTORPOCKET,POCKETTEMPLATEID,ISDEFAULT) VALUES (1,SYSDATE,'system',SYSDATE,'system',2,5,3,4,6,0,0,(SELECT ID FROM POCKET_TEMPLATE WHERE DESCRIPTION='LakuPandai-Agent'),1);

INSERT INTO POCKET_TEMPLATE_CONFIG (VERSION,LASTUPDATETIME,UPDATEDBY,CREATETIME,CREATEDBY,SUBSCRIBERTYPE,BUSINESSPARTNERTYPE,KYCLEVEL,COMMODITY,POCKETTYPE,ISSUSPENCEPOCKET,ISCOLLECTORPOCKET,POCKETTEMPLATEID,ISDEFAULT) VALUES (1,SYSDATE,'system',SYSDATE,'system',2,4,3,4,6,0,0,(SELECT ID FROM POCKET_TEMPLATE WHERE DESCRIPTION='LakuPandai-Agent'),1);

INSERT INTO PTC_GROUP_MAPPING (VERSION, LASTUPDATETIME, UPDATEDBY, CREATETIME, CREATEDBY, GROUPID, PTCID ) VALUES (1,SYSDATE,'System',SYSDATE,'System',1,(SELECT ID FROM POCKET_TEMPLATE_CONFIG WHERE POCKETTEMPLATEID = (SELECT ID FROM POCKET_TEMPLATE WHERE DESCRIPTION='LakuPandai-Agent') AND BUSINESSPARTNERTYPE = 5));

INSERT INTO PTC_GROUP_MAPPING (VERSION, LASTUPDATETIME, UPDATEDBY, CREATETIME, CREATEDBY, GROUPID, PTCID ) VALUES (1,SYSDATE,'System',SYSDATE,'System',1,(SELECT ID FROM POCKET_TEMPLATE_CONFIG WHERE POCKETTEMPLATEID = (SELECT ID FROM POCKET_TEMPLATE WHERE DESCRIPTION='LakuPandai-Agent') AND BUSINESSPARTNERTYPE = 4));

UPDATE POCKET P SET POCKETTEMPLATEID = (SELECT ID FROM POCKET_TEMPLATE WHERE DESCRIPTION = 'LakuPandai-Agent')
WHERE ID IN (SELECT P.ID FROM POCKET P, SUBSCRIBER S, PARTNER PA  WHERE P.MDNID  = S.ID 
AND PA.SUBSCRIBERID = S.ID
AND PA.BUSINESSPARTNERTYPE IN (4,5)
AND S.TYPE = 2 AND POCKETTEMPLATEID = (SELECT ID FROM POCKET_TEMPLATE WHERE DESCRIPTION = 'Emoney-FullyBanked'));

COMMIT;